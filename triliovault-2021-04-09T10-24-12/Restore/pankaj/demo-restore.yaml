apiVersion: triliovault.trilio.io/v1
kind: Restore
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"triliovault.trilio.io/v1","kind":"Restore","metadata":{"annotations":{},"name":"demo-restore","namespace":"pankaj"},"spec":{"restoreNamespace":"pankaj","skipIfAlreadyExists":true,"source":{"backup":{"name":"demo-full-backup"},"type":"Backup"}}}
  creationTimestamp: "2021-04-05T10:37:43Z"
  finalizers:
  - child-delete-finalizer
  generation: 1
  name: demo-restore
  namespace: pankaj
  resourceVersion: "92928193"
  selfLink: /apis/triliovault.trilio.io/v1/namespaces/pankaj/restores/demo-restore
  uid: 08e788a1-a3ef-4f17-96ae-6eba89056b82
spec:
  restoreNamespace: pankaj
  skipIfAlreadyExists: true
  source:
    backup:
      apiVersion: triliovault.trilio.io/v1
      kind: Backup
      name: demo-full-backup
      namespace: pankaj
      resourceVersion: "92259808"
      uid: f05b4aed-bf23-4b61-8b9b-667c3fc848bc
    target:
      apiVersion: triliovault.trilio.io/v1
      kind: Target
      name: sample-target-op
      namespace: pankaj
      resourceVersion: "92249275"
      uid: 04bb4800-393c-41f9-95c0-a6cd634831de
    type: Backup
status:
  completionTimestamp: "2021-04-05T10:38:31Z"
  condition:
  - phase: Validation
    reason: Validation InProgress
    status: InProgress
    timestamp: "2021-04-05T10:37:44Z"
  - phase: Validation
    reason: Validation Completed
    status: Completed
    timestamp: "2021-04-05T10:38:07Z"
  - phase: MetadataRestore
    reason: MetadataRestore InProgress
    status: InProgress
    timestamp: "2021-04-05T10:38:08Z"
  - phase: MetadataRestore
    reason: MetadataRestore Completed
    status: Completed
    timestamp: "2021-04-05T10:38:31Z"
  hookStatus: {}
  percentageCompletion: 100
  phase: MetadataRestore
  phaseStatus: Completed
  restoreApplication:
    operators:
    - snapshot:
        customResources:
        - groupVersionKind:
            group: etcd.database.coreos.com
            kind: EtcdCluster
            version: v1beta2
          objects:
          - demo-etcd-cluster
        operatorId: demo-etcd-cluster
        warnings:
        - |
          Resource Modified:
          GVK: [rbac.authorization.k8s.io/v1, Kind=ClusterRoleBinding]
          Name: [demo-etcd-operator-etcd-operator-etcd-operator]
          subjects[0].namespace: [pankaj] -> [pankaj]
          metadata.name: [demo-etcd-operator-etcd-operator-etcd-operator] -> [demo-etcd-operator-etcd-operator-etcd-operator-fjsf]
      status:
        existingResource:
        - groupVersionKind:
            kind: ServiceAccount
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            kind: Service
            version: v1
          objects:
          - etcd-restore-operator
        - groupVersionKind:
            group: apps
            kind: Deployment
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-backup-operator
          - demo-etcd-operator-etcd-operator-etcd-operator
          - demo-etcd-operator-etcd-operator-etcd-restore-operator
        - groupVersionKind:
            group: rbac.authorization.k8s.io
            kind: ClusterRole
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            group: rbac.authorization.k8s.io
            kind: ClusterRoleBinding
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            group: apiextensions.k8s.io
            kind: CustomResourceDefinition
            version: v1beta1
          objects:
          - etcdclusters.etcd.database.coreos.com
        newResourcesAdded:
        - groupVersionKind:
            group: rbac.authorization.k8s.io
            kind: ClusterRoleBinding
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator-fjsf
        phase: MetadataRestore
        phaseStatus: Completed
        reason: Restore MetaData Operation Successful
        skippedResources:
        - groupVersionKind:
            group: apiextensions.k8s.io
            kind: CustomResourceDefinition
            version: v1beta1
          objects:
          - etcdclusters.etcd.database.coreos.com
        - groupVersionKind:
            kind: ServiceAccount
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            group: rbac.authorization.k8s.io
            kind: ClusterRole
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            group: rbac.authorization.k8s.io
            kind: ClusterRoleBinding
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-operator
        - groupVersionKind:
            kind: Service
            version: v1
          objects:
          - etcd-restore-operator
        - groupVersionKind:
            group: apps
            kind: Deployment
            version: v1
          objects:
          - demo-etcd-operator-etcd-operator-etcd-backup-operator
          - demo-etcd-operator-etcd-operator-etcd-operator
          - demo-etcd-operator-etcd-operator-etcd-restore-operator
  restoreScope: App
  size: "0"
  startTimestamp: "2021-04-05T10:37:43Z"
  status: Completed
