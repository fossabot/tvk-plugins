apiVersion: triliovault.trilio.io/v1
kind: Backup
metadata:
  creationTimestamp: "2021-03-24T02:37:43Z"
  finalizers:
  - backup-cleanup-finalizer
  generation: 1
  name: sample-backup-custom-operator
  namespace: pmath
  ownerReferences:
  - apiVersion: triliovault.trilio.io/v1
    kind: BackupPlan
    name: sample-application-custom-operator
    uid: fda30d0c-b700-43bd-aaf9-4a3cd5e0091b
  resourceVersion: "70556455"
  selfLink: /apis/triliovault.trilio.io/v1/namespaces/pmath/backups/sample-backup-custom-operator
  uid: f86e303c-9017-4159-bad4-385ab5a3ca67
spec:
  backupPlan:
    apiVersion: triliovault.trilio.io/v1
    kind: BackupPlan
    name: sample-application-custom-operator
    namespace: pmath
    resourceVersion: "70552782"
    uid: fda30d0c-b700-43bd-aaf9-4a3cd5e0091b
  type: Incremental
status:
  backupScope: App
  completionTimestamp: "2021-03-24T02:40:59Z"
  condition:
  - phase: MetaSnapshot
    reason: MetaSnapshot InProgress
    status: InProgress
    timestamp: "2021-03-24T02:37:43Z"
  - phase: MetaSnapshot
    reason: MetaSnapshot Completed
    status: Completed
    timestamp: "2021-03-24T02:38:03Z"
  - phase: DataSnapshot
    reason: DataSnapshot InProgress
    status: InProgress
    timestamp: "2021-03-24T02:38:03Z"
  - phase: DataSnapshot
    reason: DataSnapshot Completed
    status: Completed
    timestamp: "2021-03-24T02:38:28Z"
  - phase: DataUpload
    reason: DataUpload InProgress
    status: InProgress
    timestamp: "2021-03-24T02:38:28Z"
  - phase: DataUpload
    reason: DataUpload Completed
    status: Completed
    timestamp: "2021-03-24T02:40:35Z"
  - phase: MetadataUpload
    reason: MetadataUpload InProgress
    status: InProgress
    timestamp: "2021-03-24T02:40:35Z"
  - phase: MetadataUpload
    reason: MetadataUpload Completed
    status: Completed
    timestamp: "2021-03-24T02:40:44Z"
  - phase: Retention
    reason: Retention InProgress
    status: InProgress
    timestamp: "2021-03-24T02:40:44Z"
  - phase: Retention
    reason: Retention Completed
    status: Completed
    timestamp: "2021-03-24T02:40:59Z"
  location: fda30d0c-b700-43bd-aaf9-4a3cd5e0091b/f86e303c-9017-4159-bad4-385ab5a3ca67
  percentageCompletion: 100
  phase: Retention
  phaseStatus: Completed
  size: "21368832"
  snapshot:
    operators:
    - customResources:
      - groupVersionKind:
          group: mysql.presslabs.org
          kind: MysqlCluster
          version: v1alpha1
        objects:
        - log-collector-sample-mysqlcluster
      dataSnapshots:
      - backupType: Full
        conditions:
        - phase: Snapshot
          reason: Snapshot InProgress
          status: InProgress
          timestamp: "2021-03-24T02:38:03Z"
        - phase: Snapshot
          reason: Snapshot Completed
          status: Completed
          timestamp: "2021-03-24T02:38:28Z"
        - phase: Upload
          reason: Upload InProgress
          status: InProgress
          timestamp: "2021-03-24T02:38:28Z"
        - phase: Upload
          reason: Upload Completed
          status: Completed
          timestamp: "2021-03-24T02:40:35Z"
        location: fda30d0c-b700-43bd-aaf9-4a3cd5e0091b/f86e303c-9017-4159-bad4-385ab5a3ca67/operator/log-collector-mysql-operator/data-snapshot/data-log-collector-mysql-operator-0
        persistentVolumeClaimMetadata: |
          {"apiVersion":"v1","kind":"PersistentVolumeClaim","metadata":{"annotations":{"pv.kubernetes.io/bind-completed":"yes","pv.kubernetes.io/bound-by-controller":"yes","volume.beta.kubernetes.io/storage-provisioner":"pd.csi.storage.gke.io","volume.kubernetes.io/selected-node":"gke-dev-cluster-dev-cluster-pool-eab0992b-lsr9"},"creationTimestamp":"2021-03-24T02:33:09Z","finalizers":["kubernetes.io/pvc-protection"],"labels":{"app":"mysql-operator","release":"log-collector-mysql-operator"},"name":"data-log-collector-mysql-operator-0","namespace":"pmath","resourceVersion":"70547776","selfLink":"/api/v1/namespaces/pmath/persistentvolumeclaims/data-log-collector-mysql-operator-0","uid":"6c0ac529-4d51-4712-92c9-92e6267a2e16"},"spec":{"accessModes":["ReadWriteOnce"],"resources":{"requests":{"storage":"1Gi"}},"storageClassName":"csi-gce-pd","volumeMode":"Filesystem","volumeName":"pvc-6c0ac529-4d51-4712-92c9-92e6267a2e16"},"status":{"accessModes":["ReadWriteOnce"],"capacity":{"storage":"1Gi"},"phase":"Bound"}}
        persistentVolumeClaimName: data-log-collector-mysql-operator-0
        podContainersMap:
        - containers:
          - operator
          - orchestrator
          podName: log-collector-mysql-operator-0
        size: "21368832"
        snapshotSize: "1073741824"
        uploaded: true
        volumeSnapshot:
          retryCount: 1
          status: Completed
          volumeSnapshot:
            apiVersion: snapshot.storage.k8s.io/v1beta1
            kind: VolumeSnapshot
            name: data-log-collector-mysql-o-f5a032c0-ffb7-4a84-9f10-c10aa01500b3
            namespace: pmath
            resourceVersion: "70553619"
            uid: 6658659d-7855-4809-98dc-c3a7f0132285
      operatorId: log-collector-mysql-operator
      operatorResources:
      - groupVersionKind:
          kind: Service
          version: v1
        objects:
        - log-collector-mysql-operator
        - log-collector-mysql-operator-0-svc
      - groupVersionKind:
          kind: ServiceAccount
          version: v1
        objects:
        - log-collector-mysql-operator
      - groupVersionKind:
          kind: ConfigMap
          version: v1
        objects:
        - log-collector-mysql-operator-orc
      - groupVersionKind:
          kind: Secret
          version: v1
        objects:
        - log-collector-mysql-operator-orc
      - groupVersionKind:
          group: apps
          kind: StatefulSet
          version: v1
        objects:
        - log-collector-mysql-operator
      - groupVersionKind:
          group: rbac.authorization.k8s.io
          kind: ClusterRoleBinding
          version: v1
        objects:
        - log-collector-mysql-operator
        - log-collector-mysql-operator-iysz
      - groupVersionKind:
          group: rbac.authorization.k8s.io
          kind: ClusterRole
          version: v1
        objects:
        - log-collector-mysql-operator
      - groupVersionKind:
          group: storage.k8s.io
          kind: StorageClass
          version: v1
        objects:
        - csi-gce-pd
      - groupVersionKind:
          group: apiextensions.k8s.io
          kind: CustomResourceDefinition
          version: v1beta1
        objects:
        - mysqlclusters.mysql.presslabs.org
        - mysqlbackups.mysql.presslabs.org
      warnings:
      - |
        Found Dependant Resource:
        GVK: [storage.k8s.io/v1, Kind=StorageClass]
        Name: [csi-gce-pd]
      - |
        Found Dependant Resource:
        GVK: [apiextensions.k8s.io/v1beta1, Kind=CustomResourceDefinition]
        Name: [mysqlclusters.mysql.presslabs.org]
      - |
        Dependent Resource Not Found In Namespace/Cluster:
        GVK: [storage.k8s.io/, Kind=StorageClass]
        Name: [csi-gce-pd]
  startTimestamp: "2021-03-24T02:37:43Z"
  stats:
    applicationType: Operator
    hookExists: false
    target:
      apiVersion: triliovault.trilio.io/v1
      kind: Target
      name: sample-target
      namespace: pmath
      resourceVersion: "70552758"
      uid: 7a03157a-9f04-4119-94a7-463bbe36807e
  status: Available
  type: Full
