apiVersion: triliovault.trilio.io/v1
kind: BackupPlan
metadata:
  annotations:
    kubectl.kubernetes.io/last-applied-configuration: |
      {"apiVersion":"triliovault.trilio.io/v1","kind":"BackupPlan","metadata":{"annotations":{},"name":"sample-backupplan","namespace":"ms"},"spec":{"backupConfig":{"target":{"name":"sample-target"}},"backupPlanComponents":{"operators":[{"applicationResourceSelector":[{"matchLabels":{"app":"redis","release":"m-redis"}}],"customResources":[{"groupVersionKind":{"group":"helm.fluxcd.io","kind":"HelmRelease","version":"v1"},"objects":["m-redis"]}],"operatorId":"sample-fluxcd-helm-release","operatorResourceSelector":[{"matchLabels":{"app":"helm-operator","release":"ho"}}]}]},"hookConfig":{"hooks":[{"containerRegex":"redis","hook":{"name":"sample-hookaction"},"podSelector":{"labels":[{"matchLabels":{"app":"redis","release":"m-redis"}}]}}],"mode":"Sequential"}}}
  creationTimestamp: "2021-04-05T09:57:42Z"
  finalizers:
  - backupplan-delete-finalizer
  generation: 3
  name: sample-backupplan
  namespace: ms
  resourceVersion: "93269387"
  selfLink: /apis/triliovault.trilio.io/v1/namespaces/ms/backupplans/sample-backupplan
  uid: 683e6f3c-7422-4c4a-b174-1ff5b4dddd1c
spec:
  backupConfig:
    schedulePolicy:
      fullBackupCron:
        schedule: ""
      incrementalCron:
        schedule: ""
    target:
      apiVersion: triliovault.trilio.io/v1
      kind: Target
      name: sample-target
      namespace: ms
      resourceVersion: "92917892"
      uid: 19c135cf-8f5e-4086-ae45-7053602b1c34
  backupPlanComponents:
    operators:
    - applicationResourceSelector:
      - matchLabels:
          app: redis
          release: m-redis
      customResources:
      - groupVersionKind:
          group: helm.fluxcd.io
          kind: HelmRelease
          version: v1
        objects:
        - m-redis
      operatorId: sample-fluxcd-helm-release
      operatorResourceSelector:
      - matchLabels:
          app: helm-operator
          release: ho
  hookConfig:
    hooks:
    - containerRegex: redis
      hook:
        apiVersion: triliovault.trilio.io/v1
        kind: Hook
        name: sample-hookaction
        namespace: ms
        resourceVersion: "92797996"
        uid: f7cffc2a-dec7-4fa0-93ae-22db6a447a6f
      podSelector:
        labels:
        - matchLabels:
            app: redis
            release: m-redis
    mode: Sequential
    podReadyWaitSeconds: 120
status:
  applicationType: Operator
  scope: App
  stats:
    backupSummary:
      lastSuccessfulBackup:
        apiVersion: triliovault.trilio.io/v1
        kind: Backup
        name: sample-backup-1
        namespace: ms
        resourceVersion: "93115134"
        uid: 65545a22-bd70-4aad-91d4-fe0cef57d10b
      latestBackup:
        apiVersion: triliovault.trilio.io/v1
        kind: Backup
        name: sample-backup-1
        namespace: ms
        resourceVersion: "93115134"
        uid: 65545a22-bd70-4aad-91d4-fe0cef57d10b
      totalAvailableBackups: 2
    restoreSummary:
      lastSuccessfulRestore:
        apiVersion: triliovault.trilio.io/v1
        kind: Restore
        name: sample-restore-1
        namespace: ms
        resourceVersion: "92983781"
        uid: 18a41e68-8098-4076-a948-8fa5aee2b5fd
      totalCompletedRestores: 2
  status: Available
